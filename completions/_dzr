#compdef dzr

case $CURRENT in
    2)
        local cmds
        local -a commands
        cmds=$(dzr commands)
        commands=(${(ps:\n:)cmds})
        _wanted command expl "dzr command" compadd -a commands
        ;;
    3)
        local cmd subcmds
        local -a commands
        cmd=${words[2]}
        subcmds=$(dzr completions $cmd)
        commands=(${(ps:\n:)subcmds})
        _wanted subcommand expl "dzr $cmd subcommand" compadd -a commands
        ;;
    *)
        _files
        ;;
esac
